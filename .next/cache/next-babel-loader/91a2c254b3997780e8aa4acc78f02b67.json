{"ast":null,"code":"import { useState, useCallback, useEffect } from 'react';\nimport debounce from './debounce'; // maybe use a hook instead?\n\nfunction useDimensions() {\n  var liveMeasure = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 250;\n  var initialDimensions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  var _useState = useState(initialDimensions),\n      dimensions = _useState[0],\n      setDimensions = _useState[1];\n\n  var _useState2 = useState(null),\n      node = _useState2[0],\n      setNode = _useState2[1];\n\n  var ref = useCallback(function (newNode) {\n    setNode(newNode);\n  }, []);\n  useEffect(function () {\n    // need ref to continue\n    if (!node) {\n      return;\n    }\n\n    var measure = function measure() {\n      window.requestAnimationFrame(function () {\n        var newDimensions = node.getBoundingClientRect();\n        setDimensions(newDimensions);\n      });\n    }; // invoke measure right away\n\n\n    measure();\n\n    if (liveMeasure) {\n      var debounceMeasure = debounce(measure, delay);\n\n      if ('ResizeObserver' in window) {\n        var resizeObserver = new ResizeObserver(debounceMeasure);\n        resizeObserver.observe(node);\n        window.addEventListener('scroll', debounceMeasure);\n        return function () {\n          resizeObserver.disconnect();\n          window.removeEventListener('scroll', debounceMeasure);\n        };\n      }\n\n      window.addEventListener('resize', debounceMeasure);\n      window.addEventListener('scroll', debounceMeasure);\n      return function () {\n        window.removeEventListener('resize', debounceMeasure);\n        window.removeEventListener('scroll', debounceMeasure);\n      };\n    }\n  }, [node, liveMeasure, delay]);\n  return [ref, dimensions, node];\n}\n\nexport default useDimensions; // Usage\n// function App() {\n//   const [wrapperRef, dimensions] = useDimensions();\n//   return (\n//     <div ref={wrapperRef}>\n//       height: {dimensions.height}\n//       width: {dimensions.width}\n//     </div>\n//   );\n// }","map":{"version":3,"sources":["C:/Users/USER/Desktop/pickbazar/packages/shop/helper/useComponentSize.js"],"names":["useState","useCallback","useEffect","debounce","useDimensions","liveMeasure","delay","initialDimensions","dimensions","setDimensions","node","setNode","ref","newNode","measure","window","requestAnimationFrame","newDimensions","getBoundingClientRect","debounceMeasure","resizeObserver","ResizeObserver","observe","addEventListener","disconnect","removeEventListener"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,WAAnB,EAAgCC,SAAhC,QAAiD,OAAjD;AACA,OAAOC,QAAP,MAAqB,YAArB,C,CAAmC;;AAEnC,SAASC,aAAT,GAIE;AAAA,MAHAC,WAGA,uEAHc,IAGd;AAAA,MAFAC,KAEA,uEAFQ,GAER;AAAA,MADAC,iBACA,uEADoB,EACpB;;AAAA,kBACoCP,QAAQ,CAACO,iBAAD,CAD5C;AAAA,MACOC,UADP;AAAA,MACmBC,aADnB;;AAAA,mBAEwBT,QAAQ,CAAC,IAAD,CAFhC;AAAA,MAEOU,IAFP;AAAA,MAEaC,OAFb;;AAIA,MAAMC,GAAG,GAAGX,WAAW,CAAC,UAAAY,OAAO,EAAI;AACjCF,IAAAA,OAAO,CAACE,OAAD,CAAP;AACD,GAFsB,EAEpB,EAFoB,CAAvB;AAIAX,EAAAA,SAAS,CAAC,YAAM;AACd;AACA,QAAI,CAACQ,IAAL,EAAW;AACT;AACD;;AAED,QAAMI,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpBC,MAAAA,MAAM,CAACC,qBAAP,CAA6B,YAAM;AACjC,YAAMC,aAAa,GAAGP,IAAI,CAACQ,qBAAL,EAAtB;AACAT,QAAAA,aAAa,CAACQ,aAAD,CAAb;AACD,OAHD;AAID,KALD,CANc,CAYd;;;AACAH,IAAAA,OAAO;;AAEP,QAAIT,WAAJ,EAAiB;AACf,UAAMc,eAAe,GAAGhB,QAAQ,CAACW,OAAD,EAAUR,KAAV,CAAhC;;AAEA,UAAI,oBAAoBS,MAAxB,EAAgC;AAC9B,YAAMK,cAAc,GAAG,IAAIC,cAAJ,CAAmBF,eAAnB,CAAvB;AACAC,QAAAA,cAAc,CAACE,OAAf,CAAuBZ,IAAvB;AACAK,QAAAA,MAAM,CAACQ,gBAAP,CAAwB,QAAxB,EAAkCJ,eAAlC;AAEA,eAAO,YAAM;AACXC,UAAAA,cAAc,CAACI,UAAf;AACAT,UAAAA,MAAM,CAACU,mBAAP,CAA2B,QAA3B,EAAqCN,eAArC;AACD,SAHD;AAID;;AACDJ,MAAAA,MAAM,CAACQ,gBAAP,CAAwB,QAAxB,EAAkCJ,eAAlC;AACAJ,MAAAA,MAAM,CAACQ,gBAAP,CAAwB,QAAxB,EAAkCJ,eAAlC;AAEA,aAAO,YAAM;AACXJ,QAAAA,MAAM,CAACU,mBAAP,CAA2B,QAA3B,EAAqCN,eAArC;AACAJ,QAAAA,MAAM,CAACU,mBAAP,CAA2B,QAA3B,EAAqCN,eAArC;AACD,OAHD;AAID;AACF,GApCQ,EAoCN,CAACT,IAAD,EAAOL,WAAP,EAAoBC,KAApB,CApCM,CAAT;AAsCA,SAAO,CAACM,GAAD,EAAMJ,UAAN,EAAkBE,IAAlB,CAAP;AACD;;AAED,eAAeN,aAAf,C,CAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { useState, useCallback, useEffect } from 'react';\r\nimport debounce from './debounce'; // maybe use a hook instead?\r\n\r\nfunction useDimensions(\r\n  liveMeasure = true,\r\n  delay = 250,\r\n  initialDimensions = {}\r\n) {\r\n  const [dimensions, setDimensions] = useState(initialDimensions);\r\n  const [node, setNode] = useState(null);\r\n\r\n  const ref = useCallback(newNode => {\r\n    setNode(newNode);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // need ref to continue\r\n    if (!node) {\r\n      return;\r\n    }\r\n\r\n    const measure = () => {\r\n      window.requestAnimationFrame(() => {\r\n        const newDimensions = node.getBoundingClientRect();\r\n        setDimensions(newDimensions);\r\n      });\r\n    };\r\n    // invoke measure right away\r\n    measure();\r\n\r\n    if (liveMeasure) {\r\n      const debounceMeasure = debounce(measure, delay);\r\n\r\n      if ('ResizeObserver' in window) {\r\n        const resizeObserver = new ResizeObserver(debounceMeasure);\r\n        resizeObserver.observe(node);\r\n        window.addEventListener('scroll', debounceMeasure);\r\n\r\n        return () => {\r\n          resizeObserver.disconnect();\r\n          window.removeEventListener('scroll', debounceMeasure);\r\n        };\r\n      }\r\n      window.addEventListener('resize', debounceMeasure);\r\n      window.addEventListener('scroll', debounceMeasure);\r\n\r\n      return () => {\r\n        window.removeEventListener('resize', debounceMeasure);\r\n        window.removeEventListener('scroll', debounceMeasure);\r\n      };\r\n    }\r\n  }, [node, liveMeasure, delay]);\r\n\r\n  return [ref, dimensions, node];\r\n}\r\n\r\nexport default useDimensions;\r\n\r\n// Usage\r\n\r\n// function App() {\r\n//   const [wrapperRef, dimensions] = useDimensions();\r\n\r\n//   return (\r\n//     <div ref={wrapperRef}>\r\n//       height: {dimensions.height}\r\n//       width: {dimensions.width}\r\n//     </div>\r\n//   );\r\n// }\r\n"]},"metadata":{},"sourceType":"module"}